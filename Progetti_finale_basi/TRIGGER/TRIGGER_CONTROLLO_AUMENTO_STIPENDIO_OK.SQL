-- CONTROLLO AUMENTO STIPENDIO

CREATE OR REPLACE TRIGGER AUMENTA_STIPENDIO
BEFORE UPDATE OF STIPENDIO ON DIRETTORE
FOR EACH ROW
DECLARE
ERROR_AUMENTO EXCEPTION;
BEGIN
IF(SYSDATE-:old.DATA_ASSUNZIONE<365) THEN
RAISE ERROR_AUMENTO;
END IF;
EXCEPTION
WHEN ERROR_AUMENTO THEN
RAISE_APPLICATION_ERROR(-20004,'IMPOSSIBILE AUMENTARE LO STIPENDIO DEL DIRETTORE CHE LAVORA DA MENO DI 1 ANNO NEL SOCIAL CLUB;');
END;
/